{% extends 'layouts/base_tool.html' %}
{% load bootstrap3 %}

{% block title %}
	Edit Simulation {{ model.name }}
{% endblock %}

{% block additionalcss %}


<style>
		
		h1 {
			margin-bottom:18px;
		}
		
		.next-button {
			margin-top: 15px;
		}
		/* --- Table box ----------------------------------------------------------- */
		
		.box {
			/*position: absolute;*/
			top: 40px;
			left: 0;
			height:calc(100vh - 235px);
			border: 1px solid rgb(210, 210, 210);
			padding:2px;
		
		}
		
		.overflowing-content {
		    height: 100%;
			overflow: auto;
		}
		
		.table-box {
			margin-top:-20px;
			width: max-content;
			width: intrinsic;           /* Safari/WebKit uses a non-standard name */
            width: -moz-max-content;    /* Firefox/Gecko */
            width: -webkit-max-content; /* Chrome */
		}
		
		#uploaded_table {
			padding-top:5px;
			margin-bottom:0px;
			background-color:rgb(240, 240, 240);
		}
		
		/* --- Table format -------------------------------------------------------- */
        .table {
			margin-bottom:0px;
			width: 2705px;
			overflow: auto;
        }
		

        thead, tbody, tr, td, th { display: block; text-align:left; }

        tr:after {
            content: ' ';
            display: block;
            visibility: hidden;
            clear: both;
        }

		
        thead th {
            height: max-content;
			height: intrinsic;           /* Safari/WebKit uses a non-standard name */
            height: -moz-max-content;    /* Firefox/Gecko */
            height: -webkit-max-content; /* Chrome */
        }
		
		
		thead {
			margin-left:20px;
		}
		
		.table thead > tr > th {border-bottom: 0;}

        tbody {
            height: calc(100vh - 425px);
            overflow-y: auto;
			direction: rtl;
        }

        tbody td, thead th {
            width: 150px;
            float: left;
        }
		
		uploaded_table th, uploaded_table tr {
			border-left:1px solid black;
		}
		
		[contenteditable="true"]:focus {
			background-color: rgb(225, 225, 225);
		}
		 /* --- Attribute Selections ----------------------------------------------------- */
		
		#attribute_selections {
			margin-top:0px;
			margin-left:8px;
		}
		
		#attribute_selections > div > .btn{
			width:130px;
			margin-top:35px;
			margin-left:9px;
			margin-right:9px;
			margin-bottom:3px;
			display: inline-block;
			padding-left:8px;
		}
		
		.violation-summary {
			margin-bottom:8px;
			text-align:center;
			font-size:12px;
		}
		
		.vertical-line {
			width:0;
			height:65px;
			border-left: 2px solid rgb(210, 210, 210);
			display:inline-block;
			margin-bottom:-5px;
			margin-top:10px;
		}
		
		/* --- Attributes Selection Menu ----------------------------------------------------- */
		
		.modal-body{
			padding-top:0px;
		}
		
		.modal-dialog {
			width:700px;
		}	
		
		.modal-header {		
			margin-right: 0px;
			margin-left: 0px;
			padding-right: 0px;
			padding-left: 0px;
		}

		.modal-title {
			font-size:22px;
		}
		
		#selection-options-frame {
			margin-top:12px;
			height: 290px; 
			width: 250px; 
			overflow-y:auto;
			margin-bottom:10px;
		}
		
		#selection-options {
			padding-left: 5px;
		}
		
		#selection-options > .btn {
			margin-top:5px; 
			width: 220px;
			text-align: left;
		}

		#attribute-choice {
			margin-top:12px;
			margin-bottom: 15px;
		}
		
		/* --- Edit Column Buttons ------------------------------------------------------------------- */
		
		#column_transformations {
			margin-top: 20px;
			margin-left:7px;
		}
		
		.btn-default {
			margin-left:22px;
			margin-right:22px;
		}
		
		/* --- Edit Column Modal ------------------------------------------------------------------- */
		.modal-column {       
            height: 425px;
        }
		
		.apply-transformation-button {
			margin-top: 15px;
		}
		
</style>
{% endblock %}

{% block content %}

	{% for error in errors %}
		<div class="error">{{ error }}</div><br>
	{% endfor %}
	<br>
	<h1>5 - What are the columns?</h1>


	
	<div class="form">
		<div class="form-group">
			<div class="box">
				<div class="overflowing-content">			
					<div class="table-box">
						<div id="attribute_selections"></div>
						<div id="uploaded_table"></div>
						<div id="column_transformations"></div>
					</div>
				</div>
			</div>
			<div style="display:inline-block; margin-top: 25px">
				Not specified columns will not be uploaded.<br>
				Data values that do not match the format (highlighted in red) will not be uploaded.
			</div>
			<button type="button" class="btn btn-primary pull-right next-button" onclick="next()">
				<span class="glyphicon glyphicon-star"></span> Next
			</button>
		</div>
	</div>	
	
	<br>
	<br>
	


	<!-- Choose Attribute Modal -->
	<div class="modal fade" id="chooseAttribute" tabindex="-1" role="dialog" aria-labelledby="chooseAttributeTitle" aria-hidden="true">
	  <div class="modal-dialog" role="document">
		<div class="modal-content">
		  <div class="modal-header row">
			<h5 class="modal-title col-md-11">Select Attribute Type</h5>
			<button type="button col-md-1" class="close" data-dismiss="modal" aria-label="Close" style="margin-top:2px; margin-right:19px;font-size:29px">
			  <span aria-hidden="true" >&times;</span>
			</button>
		  </div>
		  <div class="modal-body">
			  <div class="container-fluid">
				<div class="row">
				  <div class="col-md-5">
					<span id="choose-attribute-attributenumber" style="display:none;"></span>
					<div id="selection-options-frame">
						<div class="input-group" id="selection-options" ></div>
					</div>
					<button type="button" class="btn btn-info" data-toggle="modal" data-target="#createAttribute" style="width:220px;">Create attribute type</button>
				  </div>
				  <div class="col-md-7 ml-auto">
					<div class="form">
						<div id="attribute-details"></div>
					</div>	
				  </div>
				</div>
			  </div>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
			<button type="button" class="btn btn-primary" onclick="saveAttributeSelection()" data-dismiss="modal">Choose</button>
		  </div>
		</div>
	  </div>
	</div>

	
	
	<!-- Edit Column Modal -->
	<div class="modal fade" id="editColumn" tabindex="-1" role="dialog" aria-labelledby="chooseAttributeTitle" aria-hidden="true">
	  <div class="modal-dialog" role="document">
		<div class="modal-content">
		  <div class="modal-header row">
			<h5 class="modal-title col-md-11">Edit Column</h5>
			<button type="button col-md-1" class="close" data-dismiss="modal" aria-label="Close" style="margin-top:2px; margin-right:19px;font-size:29px">
			  <span aria-hidden="true" >&times;</span>
			</button>
		  </div>
		  <div class="modal-body" style="margin-top:15px;">
			  <div class="container-fluid">
				<div class="row">
				  <div class="col-md-8">
					<span id="edit-column-attributenumber" style="display:none;"></span>
					<div>
						Below you may write a python operation for the variable 'value'. By pressing "Apply Transformation" this operation will be executed on all column values. <br>
						E.g.<br>
						<ul>
							<li>value[:3]</li>
							<li>value + 100</li>
							<li>value.replace(' ','-')</li>
						</ul>
						<br>
						<textarea cols="25" rows="6" class="form-control" id="transformation-rule"></textarea>
						<button class="btn btn-outline-secondary apply-transformation-button" type="button" onclick="applyTransformation()">Apply Transformation</button>
						<div id="editColumnErrors"></div>
					</div>
				  </div>
				  <div class="col-md-4 ml-auto">
					<div id="edited-column">
						<table class="table table-sm table-condensed">
							<thead>
								<tr>
									<th scope="col" id="edited-column-name"></th>
								</tr>
							</thead>
							<tbody class="modal-column" id="edited-column-values">
							</tbody>
						</table>
					</div>	
				  </div>
				</div>
			  </div>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
			<button type="button" class="btn btn-primary" onclick="takeOverEditedColumn()" data-dismiss="modal">Save</button>
		  </div>
		</div>
	  </div>
	</div>
	
	
	
	<div id="useful-things" style="display:none;">
		<div id="attribute-options"></div>
		<div id="object_hierachy_tree">{{ object_hierachy_tree }}</div>
	</div>
	

<script>


	// THE DATA
	var data_table_json = {{ uploaded_dataset.data_table_json | safe }}

	// GLOBAL VARIABLES
	var table_headers = data_table_json["table_header"]
	var table_body = data_table_json["table_body"]
	var edited_column = []
	
	
	//====================================================================================================
	//====  Main window  =================================================================================
	//====================================================================================================
	
	
	//===  Draw the table  =============================================================================	
    function drawTheTable() {

		var table_html_string = '<table id="data-table" class="table table-sm table-condensed" style="width:' + (150*table_headers.length + 20) + 'px;">' +
									'<thead>' +
										'<tr>';

		for (var i = 0; i < table_headers.length; i++) {
			table_html_string +=  			'<th scope="col" contenteditable="true">' + table_headers[i] + '</th>';
		}
		
		table_html_string +=  			'</tr>' +
									'</thead>' +
									'<tbody>';
		
		for (var i = 0; i < table_body[0].length; i++) {
			table_html_string +=  		'<tr>';
			for (var j = 0; j < table_headers.length; j++) {
				table_html_string +=  			'<td contenteditable="true">' + table_body[j][i] + '</td>';
			}
			table_html_string +=  		'</tr>';
		}
		
		table_html_string +=  		'</tbody>' +
								'</table>';
									
		$("#uploaded_table").html(table_html_string);
	}

	
	//===  Create the "Choose Attribute" Buttons  =============================================================================	
	function createChooseAttributeButtons() {
	
		var buttons_html_string = "";	
		for (var i = 0; i < table_headers.length; i++) {
			buttons_html_string += '<div style="display:inline-block">' +
										'<button id="attribute-button' + i + '" type="button" class="btn btn-primary choose-attribute" data-toggle="modal" data-target="#chooseAttribute" data-attributenumber="' + i + '">Choose Attribute</button>' +
										'<div id="violation-summary' + i + '" class="violation-summary">&nbsp;</div>' +
										'<span id="column' + i + '-data-type" style="display:none;"></span>' +
									'</div>' +
								   '<div class="vertical-line"></div>'
		}	
		$("#attribute_selections").html(buttons_html_string);
    }
	
	//===  Create the "Edit Column" Buttons  =============================================================================	
	function createColumnTransformationFields() {
		var column_transformation_html_string = '';
									
		for (var i = 0; i < table_headers.length; i++) {
			column_transformation_html_string += '<button type="button" class="btn btn-default edit-column" data-toggle="modal" data-target="#editColumn" data-attributenumber="' + i + '">Edit Column</button>';
														
		}	
		
		$("#column_transformations").html(column_transformation_html_string);
		
	}
	
	//=== the "Next" Button is pressed  =============================================================================	
	function next() {
		
		request_body = {}
		var final_table_headers = [];
		var final_table_body = {};
		final_column_index = 0;
	
		for (var i = 0; i < table_headers.length; i++) {
			var attribute_name = $("#attribute-button" + i).html();
			if (attribute_name != "Choose Attribute"){
				//save column in final-variables
				final_table_headers.push(attribute_name);
				final_table_body[final_column_index] = table_body[i];
				
				
				//remove those values from the final_table_body that have violating formats
				for (var j = 0; j < table_body[i].length; j++) {
					if (document.getElementById('data-table').rows[j+1].cells[i].getAttribute("style") == "background-color: rgb(216, 147, 147);") {
						final_table_body[final_column_index][j] = null;
					}
				}
				final_column_index++;
			}
		}
		
		request_body["table_header"] = final_table_headers
		request_body["table_body"] = final_table_body
		
		var csrf_token = "{% csrf_token %}"

		
		$(	"<form role='form' action='' method='post' class='form' enctype='multipart/form-data'>" + 
				csrf_token +
				"<input type='hidden' name='data_table_json' value='" + JSON.stringify(request_body) + "'>" +
			"</form>").appendTo("body").submit();
		
	}
	
	//====================================================================================================
	//====  General Support Functions  ===================================================================
	//====================================================================================================
	
	//===  Update column  =============================================================================	
	
	function updateColumn(attributenumber) {
		for (var i = 0; i < table_body[attributenumber].length; i++) {
			document.getElementById('data-table').rows[i+1].cells[attributenumber].innerHTML = table_body[attributenumber][i];
		}
	}
	
	
	
	//===  Check Column for Format Violations  =============================================================================		
	function showColumnsFormatViolations(attributenumber) {
		
		//remove the old markings
		for (var i = 0; i < table_body[attributenumber].length; i++) {
			var violating_cell = document.getElementById('data-table').rows[i+1].cells[attributenumber];
			violating_cell.setAttribute("style", "");
		}
		
		//if an attribute was chosen: get and set the new markings
		var attribute_name = $("#attribute-button" + attributenumber).html();
		if (attribute_name != "Choose Attribute") {
		
			var request_body = {}
			request_body['attribute_name'] = attribute_name;
			request_body['column_values'] = table_body[attributenumber];
			
			//send the new object_hierachy_tree to the backend
			var xmlhttp = new XMLHttpRequest();       
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {

					var violating_rows = JSON.parse(this.responseText);
					var number_of_format_violations = 0;
					
					for (var i = 0; i < violating_rows.length; i++) {
						if (table_body[attributenumber][i] != null){
							number_of_format_violations++;
							var violating_row = violating_rows[i];
							var violating_cell = document.getElementById('data-table').rows[violating_row + 1].cells[attributenumber];
							violating_cell.setAttribute("style", "background-color: rgb(216, 147, 147);");
						}
					}
					
					$("#violation-summary" + attributenumber).html(number_of_format_violations.toString() + " format missmatches");
					
				}
			};

			xmlhttp.open("POST", "/tool/upload_data5__get_columns_format_violations/");
			xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
			xmlhttp.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
			xmlhttp.send(JSON.stringify(request_body));	
			
		}
	
	}
	
	
	//====================================================================================================
	//====  Choose Attribute Modal  ======================================================================
	//====================================================================================================
	

	
	//===  Display Attribute Details  =========================================================================================		  
	function inspectAttribute(i) {
		var attribute_details = JSON.parse($("#attribute-options").html())
		var attribute_detail = attribute_details[i]
		
		
		var attribute_detail_html_string = 	'<h3 id="attribute-choice">' + attribute_detail['attribute_name'] + '</h3>' +
											'<div class="form-group">' + 
												'<label class="control-label" for="attribute-description">Description</label>' +
												'<textarea cols="20" rows="3" class="form-control" id="attribute-description">' + attribute_detail['description'] + '</textarea>' +
											'</div>' + 
											'<hr />';

		var format_specifications = Object.keys(attribute_detail['format'])
			
		for (var j = 0; j < format_specifications.length; j++) {
			
			attribute_detail_html_string += '<div class="form-group row">' +
												'<label for="form-element" class="col-sm-4 col-form-label">' + format_specifications[j] + '</label>' +
												'<div class="col-sm-8">' +
													'<input type="text" readonly class="form-control-plaintext" id="form-element" value="' + attribute_detail['format'][format_specifications[j]] + '">' +
												'</div>' +
											'</div>';
											
			// save the data type in a not-displayed span beneath the "Choose Attribute" button
			if (format_specifications[j] == "type") {
				var attributenumber = $("#choose-attribute-attributenumber").html();
				$("#column" + attributenumber + "-data-type").html(attribute_detail['format'][format_specifications[j]])
			}
		}
		
		$("#attribute-details").html(attribute_detail_html_string);
	}

	//===  The "Save" Button  =========================================================================================		  
	function saveAttributeSelection() {

		var attributenumber = $("#choose-attribute-attributenumber").html();
		var attributechoice = $("#attribute-choice").html();
		

		
		//create the new column (with the converted datatype)
		var data_type = $("#column" + attributenumber + "-data-type").html()
		var new_column = []
		
		if (data_type == "int"){
			for (var i = 0; i < table_body[attributenumber].length; i++) {
				new_column.push(parseInt(table_body[attributenumber][i], 10) || null);
			}
		} else if (data_type == "real"){
			for (var i = 0; i < table_body[attributenumber].length; i++) {
				new_column.push(parseFloat(table_body[attributenumber][i], 10) || null);
			}
		} else if (data_type == "string"){
			for (var i = 0; i < table_body[attributenumber].length; i++) {
				if (table_body[attributenumber][i] != null){
					new_column.push(String(table_body[attributenumber][i]));
				} 
			}
		} else if (data_type == "boolean"){
			for (var i = 0; i < table_body[attributenumber].length; i++) {
				if (table_body[attributenumber][i].toLowerCase() == "true"){
					new_column.push(true);
				} else if (table_body[attributenumber][i].toLowerCase() == "false"){
					new_column.push(false);
				} else {
					new_column.push(null);
				}
			}
		}
		
		
		//check if the user is ok with the abount of new nulls
		var original_null_values = table_body[attributenumber].filter(function (el) {return el == null;});
		var new_null_values = new_column.filter(function (el) {return el == null;});
		number_of_additional_null_values = new_null_values.length - original_null_values.length;
		if (number_of_additional_null_values > 0) {
			var ok_given = confirm("By converting the column to " + data_type + ", " + number_of_additional_null_values.toString() + " values will be made null.");
			if (ok_given == false){return;}
		}
		
		table_body[attributenumber] = new_column
	
		//change the "Choose Attribute" button
		$("#attribute-button" + attributenumber).html(attributechoice);
		$("#attribute-button" + attributenumber).attr("class", "btn btn-light");
		
		
		
		// show the updated column
		updateColumn(attributenumber)
		showColumnsFormatViolations(attributenumber);

	}
	
	//====================================================================================================
	//====  Edit Column Modal  ===========================================================================
	//====================================================================================================
	

	//===  Draw the Edited Column (in the Edit-Column Modal on the right)  =========================================================================================		  
	function drawEditedColumnValues() {
	
		column_html_string = '';									
		
		for (var i = 0; i < edited_column.length; i++) {
			column_html_string += 	'<tr><td>' + edited_column[i] + '</td></tr>';
		}
		$("#edited-column-values").html(column_html_string);
	}					
					

	//===  "Apply Transformation" Button  =========================================================================================		  				
	function applyTransformation() {
	
		var request_body = {}
		request_body['transformation'] = $("#transformation-rule").val();
		request_body['edited_column'] = edited_column;
		
		//send the new object_hierachy_tree to the backend
		var xmlhttp = new XMLHttpRequest();       
		xmlhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {

				var response = JSON.parse(this.responseText);
				edited_column = response['edited_column'];
				drawEditedColumnValues();
				
				errors_html_string = "";
				for (var i = 0; i < response['errors'].length; i++) {
					errors_html_string += '<div class="error">' + response['errors'][i] + '</div>';
				}
				$("#editColumnErrors").html(errors_html_string);

			}
		};

		xmlhttp.open("POST", "/tool/upload_data5__edit_column/");
		xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
		xmlhttp.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
		xmlhttp.send(JSON.stringify(request_body));	
	}
	
	
	
	function takeOverEditedColumn() {
		var edited_column_number = $("#edit-column-attributenumber").html();
		table_body[edited_column_number] = edited_column;
		updateColumn(edited_column_number);
		showColumnsFormatViolations(edited_column_number);

	}
						
	//====================================================================================================
	//====  Main  ========================================================================================
	//====================================================================================================

	
	
	window.onload = function() {
		
	
		/*====  Create Table    ========================================== */
		drawTheTable()
		createChooseAttributeButtons();
		createColumnTransformationFields();
	  
	  
		/*====  WHEN CLICKED, LOAD the AttributeSelection Modal    ======= */
		var ATTRIBUTES = ['attributenumber'];
	  	$('[class="btn btn-primary choose-attribute"]').on('click', function (e) {
		   //PART 0: clear the attribute details-section
		  var attributeDetailsBlock = document.getElementById("attribute-details");
		  attributeDetailsBlock.innerHTML = "";
		  
		  
		  //PART 1: copy the value from the data-attributenumber-attribute on the button to the innerHTML of <span id="choose-attribute-attributenumber"></span> in the modal
		  var $target = $(e.target); // convert target (e.g. the button) to jquery object
		  var modalSelector = $target.data('target'); // modal targeted by the button
		  
		  // iterate over each possible data-* attribute
		  ATTRIBUTES.forEach(function (attributeName) {
			// retrieve the dom element corresponding to current attribute
			var $modalAttribute = $(modalSelector + ' #choose-attribute-' + attributeName);
			var dataValue = $target.data(attributeName);
			
			// if the attribute value is empty, $target.data() will return undefined. In JS boolean expressions return operands and are not coerced into booleans. That way is dataValue is undefined, the left part of the following Boolean expression evaluate to false and the empty string will be returned
			$modalAttribute.html(dataValue);
		  });
		
		
			//PART 2: get the suggestions from ajax request and loadinto the modal
			var attributenumber = $target.data('attributenumber');
			var url_components = window.location.href.split("/");
			var upload_id = url_components[url_components.length - 2]
			
			var xhttp = new XMLHttpRequest();       
			  xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
				
					$("#attribute-options").html(this.responseText);
					var attribute_options = JSON.parse(this.responseText)
					
					var selection_options_html_string = "";
					
				  
					for (var i = 0; i < attribute_options.length; i++) {
						selection_options_html_string += 	'<button class="btn btn-outline-secondary" type="button" onclick="inspectAttribute(' + i + ')" scope="col">' + attribute_options[i]["attribute_name"] + '</button>' +
															'<br>';
					}

					$("#selection-options").html(selection_options_html_string);

				}
			  };
		

			  xhttp.open("GET", "/tool/get_suggested_attributes?upload_id=" + upload_id + "&attributenumber=" + attributenumber , true);
			  xhttp.send();
		  });

		
	/*====  SAVE MANUAL CHANGES TO THE TABLE  ========================================================== */
		var markedCell;
		var markedCellRow;
		var markedCellCol;
		
		document.getElementById('data-table').onclick = function tableMouseListener(event) {
		  markedCell = event.target;
		  markedCellRow = markedCell.parentNode.rowIndex;
		  markedCellCol = markedCell.cellIndex;
		};
		
		document.getElementById('data-table').addEventListener("input", function() {
		
			var data_type = $("#column" + attributenumber + "-data-type").html()
			var new_value = markedCell.innerHTML;
			
			//if specified: convert the new value to the column's datatype
			if (data_type == "int"){
				new_value = parseInt(markedCell.innerHTML, 10) || null;
			} else if (data_type == "real"){
				new_value = parseFloat(markedCell.innerHTML, 10) || null;
			} else if (data_type == "boolean"){
				if (table_body[attributenumber][i].toLowerCase() == "true"){
						new_value = true;
				} else if (table_body[attributenumber][i].toLowerCase() == "false"){
						new_value = false;
				} else {
						new_value = null;
				}
			}
			
			table_body[markedCellCol][markedCellRow-1] = new_value;
			document.getElementById('data-table').rows[i+1].cells[attributenumber].innerHTML = String(new_value);
			showColumnsFormatViolations(markedCellCol);
		});
	

	
		/*====  WHEN CLICKED, LOAD the EditColumn Modal    ======================================= */
		var ATTRIBUTES = ['attributenumber'];
	  	$('[class="btn btn-default edit-column"]').on('click', function (e) {
		  
		  
			//PART 1: copy the value from the data-attributenumber-attribute on the button to the innerHTML of <span id="edit-column-attributenumber"></span> in the modal
			var $target = $(e.target); // convert target (e.g. the button) to jquery object
			var modalSelector = $target.data('target'); // modal targeted by the button
			  
			// iterate over each possible data-* attribute
			ATTRIBUTES.forEach(function (attributeName) {
			// retrieve the dom element corresponding to current attribute
				var $modalAttribute = $(modalSelector + ' #edit-column-' + attributeName);
				var dataValue = $target.data(attributeName);
				
				// if the attribute value is empty, $target.data() will return undefined. In JS boolean expressions return operands and are not coerced into booleans. That way is dataValue is undefined, the left part of the following Boolean expression evaluate to false and the empty string will be returned
				$modalAttribute.text(dataValue);
			});
		
		
				
		var attributenumber = $("#edit-column-attributenumber").html();
		
		$("#edited-column-name").html(table_headers[attributenumber]);
		edited_column = table_body[attributenumber]
		drawEditedColumnValues();
		});

		
	};
</script>


	
{% endblock %}
